<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8" />
  <title>Personal Launchpad</title>
  <link rel="stylesheet" type="text/css" media="screen" href="main.css?v=1.2" />
</head>
<body>
  <div class="page-logo">
    <a href="/">
        <svg viewBox="0 0 64 64" aria-hidden="true">
          <circle cx="32" cy="32" r="20" stroke-width="10" fill="none" />
        </svg>
    </a>
  </div>
  <div class="description-container">
    <div class="description" open="false">No description found.</div>
    <button class="info-button">
      <svg viewBox="0 0 72 24" class="chevron">
        <polyline points="68 6 36 12 4 6"></polyline>
      </svg>
    </button>
  </div>
  <img class="image" alt="No image found with that ID"></img>
  <div class="footer">
    <p class="title">No title found</p>
  </div>
  <script>
    var imageID = decodeURI(window.location.href.split("?")[1].split("i=")[1].split("&")[0]);
    document.querySelector(".image").src = "/gallery/" + imageID + ".png";
    fetch("/search/data.json", {
      cache: "no-cache"
     })
    .then(response => response.json())
    .then(data => {
      for (let i of data) {
        if (i.file == imageID) {
          document.querySelector(".footer .title").innerHTML = i.name;
          document.querySelector(".description").innerHTML = i.description;
        }
      }

      var button = document.querySelector(".info-button");
      var desc = document.querySelector(".description");
      var h = desc.clientHeight + 1;
      var c = document.querySelector(".description-container");
      desc.style.marginTop = "-" + h + "px";

      button.addEventListener("click", (e) => {
        c.style.transform = "";
        if (desc.getAttribute("open") === "true") {
          desc.style.marginTop = "-" + h + "px";
          desc.setAttribute("open",  "false");
        } else {
          desc.style.marginTop = "0px";
          desc.setAttribute("open",  "true");
        };
      });
      button.addEventListener("mouseover", () => {if (desc.getAttribute("open") === "false") {c.style.transform = "translateY(10px)";}});
      button.addEventListener("mouseleave", () => {c.style.transform = "";});

      window.addEventListener("resize", () => {
        h = desc.clientHeight + 1;
        if (desc.getAttribute("open") === "false") {
          desc.style.marginTop = "-" + h + "px";
        } else {
          desc.style.marginTop = "0px";
        }
      });
    })
    .catch((e) => {console.log("Error: " + e);});
  </script>
</body>
</html>